<!DOCTYPE html>
<!-- saved from url=(0105)https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/ -->
<html lang="en-US" class="chrome chrome80 desktop custom-responsive"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<title>A ‘C’ Test: The 0x10 Best Questions for Would-be Embedded Programmers | RMB Consulting</title>
<!-- Created by Artisteer v4.3.0.60745 -->
<meta name="viewport" content="initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no, width = device-width">
<!--[if lt IE 9]><script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<link rel="stylesheet" href="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/style.css" media="screen">
<link rel="pingback" href="https://rmbconsulting.us/xmlrpc.php">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="RMB Consulting » Feed" href="https://rmbconsulting.us/feed/">
<link rel="alternate" type="application/rss+xml" title="RMB Consulting » Comments Feed" href="https://rmbconsulting.us/comments/feed/">
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.10.4 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script async="" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/analytics.js.download"></script><script type="text/javascript" data-cfasync="false">
	var mi_version         = '7.10.4';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-19802287-1';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-19802287-1', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script>
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/rmbconsulting.us\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3.2"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-block-library-css" href="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="as-front-css" href="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/front.css" type="text/css" media="all">
<link rel="stylesheet" id="fancybox-css" href="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery.fancybox.min.css" type="text/css" media="screen">
<!--[if lte IE 7]>
<link rel='stylesheet' id='style.ie7.css-css'  href='https://rmbconsulting.us/wp-content/themes/RMB/style.ie7.css?ver=5.3.2' type='text/css' media='screen' />
<![endif]-->
<link rel="stylesheet" id="style.responsive.css-css" href="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/style.responsive.css" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[]","home_url":"https:\/\/rmbconsulting.us","hash_tracking":"false"};
/* ]]> */
</script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/frontend.min.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery-migrate-1.1.1.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/script.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/script.responsive.js.download"></script>
<link rel="https://api.w.org/" href="https://rmbconsulting.us/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://rmbconsulting.us/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://rmbconsulting.us/wp-includes/wlwmanifest.xml"> 
<link rel="canonical" href="https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/">
<link rel="shortlink" href="https://rmbconsulting.us/?p=485">
<link rel="alternate" type="application/json+oembed" href="https://rmbconsulting.us/wp-json/oembed/1.0/embed?url=https%3A%2F%2Frmbconsulting.us%2Fpublications%2Fa-c-test-the-0x10-best-questions-for-would-be-embedded-programmers%2F">
<link rel="alternate" type="text/xml+oembed" href="https://rmbconsulting.us/wp-json/oembed/1.0/embed?url=https%3A%2F%2Frmbconsulting.us%2Fpublications%2Fa-c-test-the-0x10-best-questions-for-would-be-embedded-programmers%2F&amp;format=xml">
<link rel="shortcut icon" href="https://rmbconsulting.us/wp-content/themes/RMB/favicon.ico">


<link rel="home" href="https://rmbconsulting.us/"><style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style></head>
<body class="page-template-default page page-id-485 page-child parent-pageid-35" data-gr-c-s-loaded="true">

<div id="main">
    <div id="hmenu-bg" class="bar nav" style="height: 71px; top: 110px;">
    </div>
<header class="header clickable" style="background-position: 50% 0%;">    <div class="shapes">
        <div onclick="location.href=&#39;https://rmbconsulting.us&#39;;" class="object1517692139" style="left: 182.84px; top: 0px;; margin-left: 0px !important;"></div>

            </div>





<div class="textblock object564906416" style="left: 935.81px; top: 35.28px;; margin-left: 0px !important;">
    <form class="search" method="get" name="searchform" action="https://rmbconsulting.us/">
	<input name="s" type="text" value="">
	<input class="search-button" type="submit" value="">
</form></div>

                        
                    
<a style="position:absolute;height:100%;width:100%;outline:" href="https://rmbconsulting.us/"></a></header>
<div class="sheet clearfix">
<nav class="nav desktop-nav">
    <div class="nav-inner">
    
<a href="https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/#" class="menu-btn"><span></span><span></span><span></span></a><ul class="hmenu menu-5">
	<li class="menu-item-354"><a title="Home" href="https://rmbconsulting.us/">Home</a>
	</li>
	<li class="menu-item-356"><a title="Embedded Systems Consulting" href="https://rmbconsulting.us/embedded-systems-consulting-2/">Embedded Systems Consulting</a>
	</li>
	<li class="menu-item-359"><a title="Publications" href="https://rmbconsulting.us/publications/">Publications</a>
	</li>
	<li class="menu-item-360"><a title="Firm Profile" href="https://rmbconsulting.us/firm-profile/">Firm Profile</a>
	</li>
	<li class="menu-item-353"><a title="Case Studies" href="https://rmbconsulting.us/case-studies/">Case Studies</a>
	</li>
	<li class="menu-item-358"><a title="Contact" href="https://rmbconsulting.us/contact/">Contact</a>
	</li>
</ul>
 
        </div>
    </nav><div class="layout-wrapper">
                <div class="content-layout">
                    <div class="content-layout-row">
                        <div class="layout-cell content">

						
	<article id="post-485" class="post article  post-485 page type-page status-publish hentry" style="">
                               <a href="https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/#fancyboxID-1" class="fancybox-inline"></a>
                               <h1 class="postheader entry-title">A ‘C’ Test: The 0x10 Best Questions for Would-be Embedded Programmers</h1>                                                                <div class="postcontent clearfix"><p>An obligatory and significant part of the recruitment process for embedded systems programmers seems to be the ‘C Test’. Over the years, I have had to both take and prepare such tests and in doing so have realized that these tests can be very informative for both the interviewer and interviewee. Furthermore, when given outside the pressure of an interview situation, they can also be quite entertaining (hence this article).</p>
<p>From the interviewee’s perspective, you can learn a lot about the person that has written or administered the test. Is the test designed to show off the writer’s knowledge of the minutiae of the ANSI standard rather than to test practical know-how? Does it test ludicrous knowledge, such as the ASCII values of certain characters? Are the questions heavily slanted towards your knowledge of system calls and memory allocation strategies, indicating that the writer may spend his time programming computers instead of embedded systems? If any of these are true, then I know I would seriously doubt whether I want the job in question.</p>
<p>From the interviewer’s perspective, a test can reveal several things about the candidate. Primarily, one can determine the level of the candidate’s knowledge of C. However, it is also very interesting to see how the person responds to questions to which they do not know the answers. Do they make intelligent choices, backed up with some good intuition, or do they just guess? Are they defensive when they are stumped, or do they exhibit a real curiosity about the problem, and see it as an opportunity to learn something? I find this information as useful as their raw performance on the test.</p>
<p>With these ideas in mind, I have attempted to construct a test that is heavily slanted towards the requirements of embedded systems. This is a lousy test to give to someone seeking a job writing compilers! The questions are almost all drawn from situations I have encountered over the years. Some of them are very tough; however, they should all be informative.</p>
<p>This test may be given to a wide range of candidates. Most entry-level applicants will do poorly on this test, while seasoned veterans should do very well. Points are not assigned to each question, as this tends to arbitrarily weight certain questions. However, if you choose to adapt this test for your own uses, feel free to assign scores.</p>
<h2>Preprocessor</h2>
<p><em>1. Using the #define statement, how would you declare a manifest constant that returns the number of seconds in a year? Disregard leap years in your answer.</em></p>
<div class="sourcecode">#define SECONDS_PER_YEAR (60UL * 60UL * 24UL * 365UL)</div>
<p>I’m looking for several things here:</p>
<p>(a) Basic knowledge of the #define syntax (i.e. no semi-colon at the end, the need to parenthesize etc.).</p>
<p>(b) A good choice of name, with capitalization and underscores.</p>
<p>(c) An understanding that the pre-processor will evaluate constant expressions for you. Thus, it is clearer, and penalty free to spell out how you are calculating the number of seconds in a year, rather than actually doing the calculation yourself.</p>
<p>(d) A realization that the expression will overflow an integer argument on a 16 bit machine – hence the need for the L, telling the compiler to treat the expression as a Long.</p>
<p>(e) As a bonus, if you modified the expression with a UL (indicating unsigned long), then you are off to a great start because you are showing that you are mindful of the perils of signed and unsigned types – and remember, first impressions count!</p>
<p><em>2. Write the ‘standard’ MIN macro. That is, a macro that takes two arguments and returns the smaller of the two arguments.</em></p>
<div class="sourcecode">#define MIN(A,B) ((A) &lt;= (B) ? (A) : (B))</div>
<p>The purpose of this question is to test the following:</p>
<p>(a) Basic knowledge of the #define directive as used in macros. This is important, because until the inline operator becomes part of standard C, macros are the only portable way of generating inline code. Inline code is often necessary in embedded systems in order to achieve the required performance level.</p>
<p>(b) Knowledge of the ternary conditional operator. This exists in C because it allows the compiler to potentially produce more optimal code than an if-then-else sequence. Given that performance is normally an issue in embedded systems, knowledge and use of this construct is important.</p>
<p>(c) Understanding of the need to very carefully parenthesize arguments to macros.</p>
<p>(d) I also use this question to start a discussion on the side effects of macros, e.g. what happens when you write code such as :</p>
<div class="sourcecode">least = MIN(*p++, b);</div>
<p><em>3. What is the purpose of the preprocessor directive #error?</em></p>
<p>Either you know the answer to this, or you don’t. If you don’t, then see reference 1. This question is very useful for differentiating between normal folks and the nerds. It’s only the nerds that actually read the appendices of C textbooks that find out about such things. Of course, if you aren’t looking for a nerd, the candidate better hope she doesn’t know the answer.</p>
<h2>Infinite Loops</h2>
<p><em>4. Infinite loops often arise in embedded systems. How does one code an infinite loop in C?</em></p>
<p>There are several solutions to this question. My preferred solution is:</p>
<div class="sourcecode">
<p>while(1)</p>
<p>{</p>
<div class="indent1">…</div>
<p>}</p>
</div>
<p>Another common construct is:</p>
<div class="sourcecode">
<p>for(;;)</p>
<p>{</p>
<div class="indent1">…</div>
<p>}</p>
</div>
<p>Personally, I dislike this construct because the syntax doesn’t exactly spell out what is going on. Thus, if a candidate gives this as a solution, I’ll use it as an opportunity to explore their rationale for doing so. If their answer is basically – ‘I was taught to do it this way and I have never thought about it since’ – then it tells me something (bad) about them. Conversely, if they state that it’s the K&amp;R preferred method and the only way to get an infinite loop passed Lint, then they score bonus points.</p>
<p>A third solution is to use a goto:</p>
<div class="sourcecode">
<p>Loop:</p>
<p>…</p>
<p>goto Loop;</p>
</div>
<p>Candidates that propose this are either assembly language programmers (which is probably good), or else they are closet BASIC / FORTRAN programmers looking to get into a new field.</p>
<h2>Data declarations</h2>
<p><em>5. Using the variable a, write down definitions for the following:</em></p>
<p><em>(a) </em><em>An integer</em></p>
<p><em>(b) </em><em>A pointer to an integer</em></p>
<p><em>(c) </em><em>A pointer to a pointer to an integer</em></p>
<p><em>(d) </em><em>An array of ten integers</em></p>
<p><em>(e) </em><em>An array of ten pointers to integers</em></p>
<p><em>(f) </em><em>A pointer to an array of ten integers</em></p>
<p><em>(g) </em><em>A pointer to a function that takes an integer as an argument and returns an integer</em></p>
<p>(h) <em>An array of ten pointers to functions that take an integer argument and return an integer</em>.</p>
<p>The answers are:</p>
<div class="sourcecode">
<p>(a) int a; // An integer</p>
<p>(b) int *a; // A pointer to an integer</p>
<p>(c) int **a; // A pointer to a pointer to an integer</p>
<p>(d) int a[10]; // An array of 10 integers</p>
<p>(e) int *a[10]; // An array of 10 pointers to integers</p>
<p>(f) int (*a)[10]; // A pointer to an array of 10 integers</p>
<p>(g) int (*a)(int); // A pointer to a function a that takes an integer argument and returns an integer</p>
<p>(h) int (*a[10])(int); // An array of 10 pointers to functions that take an integer argument and return an integer</p>
</div>
<p>People often claim that a couple of these are the sorts of thing that one looks up in textbooks – and I agree. While writing this article, I consulted textbooks to ensure the syntax was correct. However, I expect to be asked this question (or something close to it) when in an interview situation. Consequently, I make sure I know the answers – at least for the few hours of the interview. Candidates that don’t know the answers (or at least most of them) are simply unprepared for the interview. If they can’t be prepared for the interview, what will they be prepared for?</p>
<h2>Static</h2>
<p><em>6. What are the uses of the keyword static?</em></p>
<p>This simple question is rarely answered completely. Static has three distinct uses in C:</p>
<p>(a) A variable declared static within the body of a function maintains its value between function invocations.</p>
<p>(b) A variable declared static within a module <a href="https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/#footnote1">[1]</a>, (but outside the body of a function) is accessible by all functions within that module. It is not accessible by functions within any other module. That is, it is a localized global.</p>
<p>(c) Functions declared static within a module may only be called by other functions within that module. That is, the scope of the function is localized to the module within which it is declared.</p>
<p>Most candidates get the first part correct. A reasonable number get the second part correct, while a pitiful number understand answer (c). This is a serious weakness in a candidate, since they obviously do not understand the importance and benefits of localizing the scope of both data and code.</p>
<h2>Const</h2>
<p><em>7. What does the keyword const mean?</em></p>
<p>As soon as the interviewee says ‘const means constant’, I know I’m dealing with an amateur. Dan Saks has exhaustively covered const in the last year, such that every reader of ESP should be extremely familiar with what const can and cannot do for you. If you haven’t been reading that column, suffice it to say that const means “read-only”. Although this answer doesn’t really do the subject justice, I’d accept it as a correct answer. (If you want the detailed answer, then read Saks’ columns – carefully!).</p>
<p>If the candidate gets the answer correct, then I’ll ask him these supplemental questions:</p>
<p>What do the following incomplete <a href="https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/#footnote2">[2]</a> declarations mean?</p>
<div class="sourcecode">
<p>const int a;</p>
<p>int const a;</p>
<p>const int *a;</p>
<p>int * const a;</p>
<p>int const * a const;</p>
</div>
<p>The first two mean the same thing, namely a is a const (read-only) integer. The third means a is a pointer to a const integer (i.e., the integer isn’t modifiable, but the pointer is). The fourth declares a to be a const pointer to an integer (i.e., the integer pointed to by a is modifiable, but the pointer is not). The final declaration declares a to be a const pointer to a const integer (i.e., neither the integer pointed to by a, nor the pointer itself may be modified).</p>
<p>If the candidate correctly answers these questions, I’ll be impressed.</p>
<p>Incidentally, one might wonder why I put so much emphasis on const, since it is very easy to write a correctly functioning program without ever using it. There are several reasons:</p>
<p>(a) The use of const conveys some very useful information to someone reading your code. In effect, declaring a parameter const tells the user about its intended usage. If you spend a lot of time cleaning up the mess left by other people, then you’ll quickly learn to appreciate this extra piece of information. (Of course, programmers that use const, rarely leave a mess for others to clean up…)</p>
<p>(b) const has the potential for generating tighter code by giving the optimizer some additional information.</p>
<p>(c) Code that uses const liberally is inherently protected by the compiler against inadvertent coding constructs that result in parameters being changed that should not be. In short, they tend to have fewer bugs.</p>
<h2>Volatile</h2>
<p><em>8. What does the keyword volatile mean? Give three different examples of its use.</em></p>
<p>A volatile variable is one that can change unexpectedly. Consequently, the compiler can make no assumptions about the value of the variable. In particular, the optimizer must be careful to reload the variable every time it is used instead of holding a copy in a register. Examples of volatile variables are:</p>
<p>(a) Hardware registers in peripherals (e.g., status registers)</p>
<p>(b) Non-stack variables referenced within an interrupt service routine.</p>
<p>(c) Variables shared by multiple tasks in a multi-threaded application.</p>
<p>If a candidate does not know the answer to this question, they aren’t hired. I consider this the most fundamental question that distinguishes between a ‘C programmer’ and an ‘embedded systems programmer’. Embedded folks deal with hardware, interrupts, RTOSes, and the like. All of these require volatile variables. Failure to understand the concept of volatile will lead to disaster.</p>
<p>On the (dubious) assumption that the interviewee gets this question correct, I like to probe a little deeper, to see if they really understand the full significance of volatile. In particular, I’ll ask them the following:</p>
<p><em>(a) Can a parameter be both const and volatile? Explain your answer.</em></p>
<p><em>(b) Can a pointer be volatile? Explain your answer.</em></p>
<p><em>(c) What is wrong with the following function?:</em></p>
<div class="sourcecode">
<p>int square(volatile int *ptr)</p>
<p>{</p>
<div class="indent1">return *ptr * *ptr;</div>
<p>}</p>
</div>
<p>The answers are as follows:</p>
<p>(a) Yes. An example is a read only status register. It is volatile because it can change unexpectedly. It is const because the program should not attempt to modify it.</p>
<p>(b) Yes. Although this is not very common. An example is when an interrupt service routine modifies a pointer to a buffer.</p>
<p>(c) This one is wicked. The intent of the code is to return the square of the value pointed to by *ptr. However, since *ptr points to a volatile parameter, the compiler will generate code that looks something like this:</p>
<div class="sourcecode">
<p>int square(volatile int *ptr)</p>
<p>{</p>
<div class="indent1">int a,b;<p></p>
<p>a = *ptr;</p>
<p>b = *ptr;</p>
<p>return a * b;</p></div>
<p>}</p>
</div>
<p>Since it is possible for the value of *ptr to change unexpectedly, it is possible for a and b to be different. Consequently, this code could return a number that is not a square! The correct way to code this is:</p>
<div class="sourcecode">
<p>long square(volatile int *ptr)</p>
<p>{</p>
<div class="indent1">int a;<p></p>
<p>a = *ptr;</p>
<p>return a * a;</p></div>
<p>}</p>
</div>
<h2>Bit Manipulation</h2>
<p>9. Embedded systems always require the user to manipulate bits in registers or variables. Given an integer variable a, write two code fragments. The first should set bit 3 of a. The second should clear bit 3 of a. In both cases, the remaining bits should be unmodified.</p>
<p>These are the three basic responses to this question:</p>
<p>(a) No idea. The interviewee cannot have done any embedded systems work.</p>
<p>(b) Use bit fields. Bit fields are right up there with trigraphs as the most brain-dead portion of C. Bit fields are inherently non-portable across compilers, and as such guarantee that your code is not reusable. I recently had the misfortune to look at a driver written by Infineon for one of their more complex communications chip. It used bit fields, and was completely useless because my compiler implemented the bit fields the other way around. The moral – never let a non-embedded person anywhere near a real piece of hardware! <a href="https://rmbconsulting.us/publications/a-c-test-the-0x10-best-questions-for-would-be-embedded-programmers/#footnote3">[3]</a></p>
<p>(c) Use #defines and bit masks. This is a highly portable method, and is the one that should be used. My optimal solution to this problem would be:</p>
<div class="sourcecode">
<p>#define BIT3 (0x1 &lt;&lt; 3)</p>
<p>static int a;</p>
<p>void set_bit3(void) {</p>
<div class="indent1">a |= BIT3;</div>
<p>}</p>
<p>void clear_bit3(void) {</p>
<div class="indent1">a &amp;= ~BIT3;</div>
<p>}</p>
</div>
<p>Some people prefer to define a mask, together with manifest constants for the set &amp; clear values. This is also acceptable. The important elements that I’m looking for are the use of manifest constants, together with the |= and &amp;= ~ constructs.</p>
<h2>Accessing fixed memory locations</h2>
<p><em>10. Embedded systems are often characterized by requiring the programmer to access a specific memory location. On a certain project it is required to set an integer variable at the absolute address 0x67a9 to the value 0xaa55. The compiler is a pure ANSI compiler. Write code to accomplish this task</em>.</p>
<p>This problem tests whether you know that it is legal to typecast an integer to a pointer in order to access an absolute location. The exact syntax varies depending upon one’s style. However, I would typically be looking for something like this:</p>
<div class="sourcecode">
<p>int *ptr;</p>
<p>ptr = (int *)0x67a9;</p>
<p>*ptr = 0xaa55;</p>
</div>
<p>A more obfuscated approach is:</p>
<div class="sourcecode">*(int * const)(0x67a9) = 0xaa55;</div>
<p>Even if your taste runs more to the second solution, I suggest the first solution when you are in an interview situation.</p>
<h2>Interrupts</h2>
<p>11. Interrupts are an important part of embedded systems. Consequently, many compiler vendors offer an extension to standard C to support interrupts. Typically, this new key word is __interrupt. The following code uses __interrupt to define an interrupt service routine. Comment on the code.</p>
<div class="sourcecode">
<p>__interrupt double compute_area(double radius) {</p>
<div class="indent1">double area = PI * radius * radius;<p></p>
<p>printf(“nArea = %f”, area);</p>
<p>return area;</p></div>
<p>}</p>
</div>
<p>This function has so much wrong with it, it’s almost tough to know where to start.</p>
<p>(a) Interrupt service routines cannot return a value. If you don’t understand this, then you aren’t hired.</p>
<p>(b) ISR’s cannot be passed parameters. See item (a) for your employment prospects if you missed this.</p>
<p>(c) On many processors / compilers, floating point operations are not necessarily re-entrant. In some cases one needs to stack additional registers, in other cases, one simply cannot do floating point in an ISR. Furthermore, given that a general rule of thumb is that ISRs should be short and sweet, one wonders about the wisdom of doing floating point math here.</p>
<p>(d) In a similar vein to point (c), printf() often has problems with reentrancy and performance. If you missed points (c) &amp; (d) then I wouldn’t be too hard on you. Needless to say, if you got these two points, then your employment prospects are looking better and better.</p>
<h2>Code Examples</h2>
<p><em>12. What does the following code output and why?</em></p>
<div class="sourcecode">
<p>void foo(void)</p>
<p>{</p>
<div class="indent1">unsigned int a = 6;<p></p>
<p>int b = -20;</p>
<p>(a+b &gt; 6) ? puts(“&gt; 6”) : puts(“&lt;= 6”);</p></div>
<p>}</p>
</div>
<p>This question tests whether you understand the integer promotion rules in C – an area that I find is very poorly understood by many developers. Anyway, the answer is that this outputs “&gt; 6”. The reason for this is that expressions involving signed and unsigned types have all operands promoted to unsigned types. Thus –20 becomes a very large positive integer and the expression evaluates to greater than 6. This is a very important point in embedded systems where unsigned data types should be used frequently (see reference 2). If you get this one wrong, then you are perilously close to not being hired.</p>
<p><em>13. Comment on the following code fragment?</em></p>
<div class="sourcecode">
<p>unsigned int zero = 0;</p>
<p>unsigned int compzero = 0xFFFF; /*1’s complement of zero */</p>
</div>
<p>On machines where an int is not 16 bits, this will be incorrect. It should be coded:</p>
<div class="sourcecode">unsigned int compzero = ~0;</div>
<p>This question really gets to whether the candidate understands the importance of word length on a computer. In my experience, good embedded programmers are critically aware of the underlying hardware and its limitations, whereas computer programmers tend to dismiss the hardware as a necessary annoyance.</p>
<p>By this stage, candidates are either completely demoralized – or they are on a roll and having a good time. If it is obvious that the candidate isn’t very good, then the test is terminated at this point. However, if the candidate is doing well, then I throw in these supplemental questions. These questions are hard, and I expect that only the very best candidates will do well on them. In posing these questions, I’m looking more at the way the candidate tackles the problems, rather than the answers. Anyway, have fun…</p>
<h2>Dynamic Memory Allocation</h2>
<p>14. Although not as common as in non-embedded computers, embedded systems still do dynamically allocate memory from the heap. What are the problems with dynamic memory allocation in embedded systems?</p>
<p>Here, I expect the user to mention memory fragmentation, problems with garbage collection, variable execution time, etc. This topic has been covered extensively in ESP, mainly by Plauger. His explanations are far more insightful than anything I could offer here, so go and read those back issues! Having lulled the candidate into a sense of false security, I then offer up this tidbit:</p>
<p><em>What does the following code fragment output and why?</em></p>
<div class="sourcecode">
<p>char *ptr;</p>
<p>if ((ptr = (char *)malloc(0)) == NULL) {</p>
<div class="indent1">puts(“Got a null pointer”);</div>
<p>}</p>
<p>else {</p>
<div class="indent1">puts(“Got a valid pointer”);</div>
<p>}</p>
</div>
<p>This is a fun question. I stumbled across this only recently, when a colleague of mine inadvertently passed a value of 0 to malloc, and got back a valid pointer! After doing some digging, I discovered that the result of malloc(0) is implementation defined, so that the correct answer is ‘it depends’. I use this to start a discussion on what the interviewee thinks is the correct thing for malloc to do. Getting the right answer here is nowhere near as important as the way you approach the problem and the rationale for your decision.</p>
<h2>Typedef</h2>
<p><em>15. Typedef is frequently used in C to declare synonyms for pre-existing data types. It is also possible to use the preprocessor to do something similar. For instance, consider the following code fragment:</em></p>
<div class="sourcecode">
<p>#define dPS struct s *</p>
<p>typedef struct s * tPS;</p>
</div>
<p><em>The intent in both cases is to define dPS and tPS to be pointers to structure s. Which method (if any) is preferred and why? </em></p>
<p>This is a very subtle question, and anyone that gets it right (for the right reason) is to be congratulated or condemned (“get a life” springs to mind). The answer is the typedef is preferred. Consider the declarations:</p>
<div class="sourcecode">
<p>dPS p1,p2;</p>
<p>tPS p3,p4;</p>
</div>
<p>The first expands to</p>
<div class="sourcecode">struct s * p1, p2;</div>
<p>which defines p1 to be a pointer to the structure and p2 to be an actual structure, which is probably not what you wanted. The second example correctly defines p3 &amp; p4 to be pointers.</p>
<h2>Obfuscated syntax</h2>
<p><em>16. C allows some appalling constructs. Is this construct legal, and if so what does this code do? </em></p>
<div class="sourcecode">
<p>int a = 5, b = 7, c;</p>
<p>c = a+++b;</p>
</div>
<p>This question is intended to be a lighthearted end to the quiz, as, believe it or not, this is perfectly legal syntax. The question is how does the compiler treat it? Those poor compiler writers actually debated this issue, and came up with the “maximum munch” rule, which stipulates that the compiler should bite off as big a (legal) chunk as it can. Hence, this code is treated as:</p>
<div class="sourcecode">c = a++ + b;</div>
<p>Thus, after this code is executed, a = 6, b = 7 &amp; c = 12;</p>
<p>If you knew the answer, or guessed correctly – then well done. If you didn’t know the answer then I would not consider this to be a problem. I find the biggest benefit of this question is that it is very good for stimulating questions on coding styles, the value of code reviews and the benefits of using lint.</p>
<p>Well folks, there you have it. That was my version of the C test. I hope you had as much fun doing it as I had writing it. If you think the test is a good test, then by all means use it in your recruitment. Who knows, I may get lucky in a year or two and end up being on the receiving end of my own work.</p>
<p>References:</p>
<ol>
<li>In Praise of the #error directive. ESP September 1999.</li>
<li>Efficient C Code for Eight-Bit MCUs. ESP November 1988.</li>
</ol>
<hr size="1">
<p><a id="footnote1"></a>[1] Translation unit for the pedagogues out there.</p>
<p><a id="footnote2"></a>[2] I’ve had complaints that these code fragments are incorrect syntax. This is correct. However, writing down syntactically correct code pretty much gives the game away.</p>
<p><a id="footnote3"></a>[3] I’ve recently softened my stance on bit fields. At least one compiler vendor (IAR) now offers a compiler switch for specifying the bit field ordering. Furthermore the compiler generates optimal code with bit field defined registers – and as such I now do use bit fields in IAR applications.</p>
</div>

 
</article>
	
			

                        </div>
                    </div>
                </div>
            </div>
    </div>
<footer class="footer">
  <div class="footer-inner"><div class="content-layout">
    <div class="content-layout-row">
                    <div class="layout-cell layout-cell-size2">
            <div class="center-wrapper"><div class="center-inner"><div class="widget widget widget_text footer-text" id="text-2"><div class="widget-title">RMB CONSULTING INC.</div><div class="widget-content">			<div class="textwidget"><p>10087 Masser Road<br>
Frederick, MD 21702-1857<br>
United States<br>
Phone: +1 301-551-5138</p>
</div>
		</div></div></div></div><div class="clearfix"> </div>            </div>
                    <div class="layout-cell layout-cell-size2">
            <div class="center-wrapper"><div class="center-inner"><div class="widget widget widget_text footer-text" id="text-3"><div class="widget-title">WHO HIRES EMBEDDED SYSTEMS CONSULTANTS?</div><div class="widget-content">			<div class="textwidget"><p>RMB Consulting is most often hired by:</p>
<ul>
<li>Technology companies needing assistance with embedded systems design &amp; development</li>
<li>Manufacturing companies looking for turn-key engineering solutions (hardware, software &amp; firmware)</li>
<li>Engineering teams augmenting their in-house staff</li>
</ul>
</div>
		</div></div></div></div><div class="clearfix"> </div>            </div>
            </div>
</div>
        <div class="footer-text">
<p class="page-footer">
        <span id="footnote-links"><a href="http://www.accentinteractive.com/what/web-design" target="_blank">Web Design</a> by <a href="http://www.accentinteractive.com/" target="_blank">Accent Interactive</a>.</span>
    </p>
</div>
</div>
</footer>

</div>


<div id="wp-footer">
			<!-- Start of StatCounter Code -->
		<script>
			<!--
			var sc_project=5394474;
			var sc_security="d7215a9e";
						var scJsHost = (("https:" == document.location.protocol) ?
				"https://secure." : "http://www.");
			//-->
			
document.write("<sc"+"ript src='" +scJsHost +"statcounter.com/counter/counter.js'></"+"script>");		</script><script src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/counter.js.download"></script><span class="statcounter"><a class="statcounter" href="http://www.statcounter.com/" target="_blank"><img src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/t.php" alt="StatCounter - Free Web Tracker and Counter" border="0"></a></span>

				<noscript><div class="statcounter"><a title="web analytics" href="https://statcounter.com/"><img class="statcounter" src="https://c.statcounter.com/5394474/0/d7215a9e/0/" alt="web analytics" /></a></div></noscript>
		<!-- End of StatCounter Code -->
		<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/comment-reply.min.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery.bxslider.min.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/front.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery.fancybox.min.js.download"></script>
<script type="text/javascript">
var fb_timeout, fb_opts={'overlayShow':true,'hideOnOverlayClick':true,'showCloseButton':true,'margin':20,'centerOnScroll':true,'enableEscapeButton':true,'autoScale':true };
if(typeof easy_fancybox_handler==='undefined'){
var easy_fancybox_handler=function(){
jQuery('.nofancybox,a.wp-block-file__button,a.pin-it-button,a[href*="pinterest.com/pin/create"],a[href*="facebook.com/share"],a[href*="twitter.com/share"]').addClass('nolightbox');
/* IMG */
var fb_IMG_select='a[href*=".jpg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpg"]:not(.nolightbox),a[href*=".jpeg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpeg"]:not(.nolightbox),a[href*=".png"]:not(.nolightbox,li.nolightbox>a),area[href*=".png"]:not(.nolightbox),a[href*=".webp"]:not(.nolightbox,li.nolightbox>a),area[href*=".webp"]:not(.nolightbox)';
jQuery(fb_IMG_select).addClass('fancybox image');
var fb_IMG_sections=jQuery('.gallery,.wp-block-gallery,.tiled-gallery,.wp-block-jetpack-tiled-gallery');
fb_IMG_sections.each(function(){jQuery(this).find(fb_IMG_select).attr('rel','gallery-'+fb_IMG_sections.index(this));});
jQuery('a.fancybox,area.fancybox,li.fancybox a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'transitionIn':'elastic','easingIn':'easeOutBack','transitionOut':'elastic','easingOut':'easeInBack','opacity':false,'hideOnContentClick':false,'titleShow':true,'titlePosition':'over','titleFromAlt':true,'showNavArrows':true,'enableKeyboardNav':true,'cyclic':false}))});
/* Inline */
jQuery('a.fancybox-inline,area.fancybox-inline,li.fancybox-inline a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'type':'inline','autoDimensions':true,'scrolling':'no','easingIn':'easeOutBack','easingOut':'easeInBack','opacity':false,'hideOnContentClick':false,'titleShow':false}))});};
jQuery('a.fancybox-close').on('click',function(e){e.preventDefault();jQuery.fancybox.close()});
};
var easy_fancybox_auto=function(){setTimeout(function(){jQuery('#fancybox-auto').trigger('click')},1000);};
jQuery(easy_fancybox_handler);jQuery(document).on('post-load',easy_fancybox_handler);
jQuery(easy_fancybox_auto);
</script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery.easing.min.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/jquery.mousewheel.min.js.download"></script>
<script type="text/javascript" src="./A ‘C’ Test_ The 0x10 Best Questions for Would-be Embedded Programmers _ RMB Consulting_files/wp-embed.min.js.download"></script>
	<!-- 65 queries. 1.015 seconds. -->
</div>




<div id="resp"><div id="resp-m"></div><div id="resp-t"></div></div><div id="resp-tablet-landscape"></div><div id="resp-tablet-portrait"></div><div id="resp-phone-landscape"></div><div id="resp-phone-portrait"></div><div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div></body></html>